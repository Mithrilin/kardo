CREATE TABLE video_clips (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL PRIMARY KEY,
  publication_time TIMESTAMP WITHOUT TIME ZONE NOT NULL,
  creator_id BIGINT NOT NULL REFERENCES users(id) ON DELETE CASCADE,
  video_id BIGINT NOT NULL REFERENCES media_files(id) ON DELETE CASCADE
);

CREATE TABLE video_clip_hashtags (
  video_clip_id BIGINT NOT NULL REFERENCES video_clips(id) ON DELETE CASCADE,
  hashtag VARCHAR(50) NOT NULL,
  PRIMARY KEY (video_clip_id, hashtag)
);

CREATE TABLE likes (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL PRIMARY KEY,
  addition_time TIMESTAMP WITHOUT TIME ZONE NOT NULL,
  creator_id BIGINT NOT NULL REFERENCES users(id) ON DELETE CASCADE,
  video_clip_id BIGINT NOT NULL REFERENCES video_clips(id) ON DELETE CASCADE,
  UNIQUE(creator_id, video_clip_id)
);